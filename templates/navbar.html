{% macro icon(name, classes='') %}
    <iconify-icon class="{{ classes }}" icon="{{ name }}"></iconify-icon>
{% endmacro %}

{% macro nav_link(title, icon_name, additional_classes='', href='#') %}
    <a href="{{ href }}" class="nav-link px-0 text-white me-3 {{ additional_classes }}">
        {{ icon(icon_name, 'me-1') }}
        {{ title }}
    </a>
{% endmacro %}

<nav class="navbar navbar-dark bg-dark navbar-expand-xl p-2">
    <div class="container-fluid">
        <a class="navbar-brand text-white me-5" href="{{ url_for('index') }}">
            <img src="{{ url_for('static', filename='images/gamer_paradise_icon.png') }}"
                 width="30" height="30" alt="Gamer Paradise"
                 class="align-text-top me-2">Gamer Paradise
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarNav" aria-controls="navbarNav"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <div class="navbar-nav d-inline-flex">
                {{ nav_link('Товары', 'clarity:shopping-bag-solid') }} {# TODO: исправить ссылку #}
                {{ nav_link('Избранное', 'ant-design:star-filled') }} {# TODO: исправить ссылку #}
                {{ nav_link('Корзина', 'clarity:shopping-cart-solid') }} {# TODO: исправить ссылку #}
                {% if current_user.is_authenticated and current_user.user.role == 'admin' %}
                    {{ nav_link('Добавить товар', 'material-symbols:add-business-rounded',
                    'text-nowrap', url_for('games.add')) }}
                {% endif %}
            </div>
            <form class="d-flex ms-auto my-2" role="search">
                <input class="form-control me-2 form-control-dark text-white w-auto"
                       type="search" placeholder="Поиск товаров" aria-label="Search">
                <button class="btn btn-outline-secondary icon me-3">  {# TODO: исправить нажатие #}
                    {{ icon('fa-solid:search') }}
                </button>
            </form>
            <button class="btn btn-light me-2 my-2" type="button"
                    {% if current_user.is_authenticated %}
                        onclick="window.location='{{ url_for('profile.index') }}'">
                        {{ icon('fa-solid:user', 'profile-icon') }}
                        {{ current_user.user.name|default('Профиль', True) }}
                    {% else %}
                        onclick="window.location='{{ url_for('auth.register') }}'">
                        {{ icon('fa:user-plus', 'profile-icon') }} Зарегистрироваться
                    {% endif %}
            </button>
            <button class="btn btn-outline-light me-2" type="button"
                {% if current_user.is_authenticated %}
                    onclick="window.location='{{ url_for('auth.logout') }}'">
                    {{ icon('mdi:logout', 'profile-icon') }} Выйти
                {% else %}
                    onclick="window.location='{{ url_for('auth.login') }}'">
                    {{ icon('mdi:login', 'profile-icon') }} Войти
                {% endif %}
            </button>
        </div>
    </div>
</nav>